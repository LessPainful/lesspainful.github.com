<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>blog.LessPainful.com</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link href="http://www.lesspainful.com/stylesheets/styles.css?1328445224" media="screen" rel="stylesheet" type="text/css" />
  <script src="http://www.lesspainful.com/javascripts/jquery-1.5.1.min.js?1328445224" type="text/javascript"></script>
  <script type="text/javascript">
    /*
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-22081783-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    */

    $(document).ready(function(){
      //$("#logoring, #footer").css('opacity',0.7);
      $("#logolink").hover(
        function(){
          $("#logoring").stop(true,false).animate({
            'opacity' : 1
          },'fast');
        },
        function(){
          $("#logoring").stop(true,false).animate({
            'opacity' : 0.7
          },'fast');
        }
      );
      $("#footer").hover(
        function(){
          $("#footer").stop(true,false).animate({
            'opacity' : 1
          },'fast');
        },
        function(){
          $("#footer").stop(true,false).animate({
            'opacity' : 0.7
          },'fast');
        }
      );
    });

  </script>
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29395630-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>

  <style type="text/css" media="screen">
    
    /* BLOG STYLES */
    pre {
      background-color: white;
      color: black;
      padding: 0px;
    }
    body {
      background-color:#19171b; 
      color:#c7c3ca;
    }
    a {
      color:#a7e252;
    }
    a:hover {
      color:#bef969;
    }
    .blogposts {
      width:710px;
    }
    .post {
      margin-top:40px;
      width:100%;
    }
    .post div {
      
    }
    .post .p_head {
      height:100px;
    }
      .post .p_thumb {
        width:80px;
        height:80px;
        margin-right:20px;
        background-color:rgba(255,255,255,0.5);
        background-repeat:no-repeat;
        background-position:center center;
        overflow:hidden;
      }
      .post .p_title {
        width:600px;
        height:58px;
        padding:0;
      }
        .post .p_title h1, .post .p_title a {
          color:#efefef;
        }
        .post .p_title a:hover {
          color:#fff;
        }
        .post .p_title h1 {
          position:absolute;
          width:100%;
          height:auto;
          left:0;
          bottom:0;
          margin:0;
          padding:0;
          letter-spacing:0;
          color:#efefef;
        }
      .post .p_info {
        width:600px;
        height:19px;
        line-height:14px;
        padding-top:5px;
      }
      .post .p_info {
        
      }
    .post .p_content {
      width:670px;
      background:#efefef;
      color:#333;
      padding:20px;
    }
      .post .p_content .p_media {
        width:100%;
        height:290px;
        background-color:rgba(0,0,0,0.15);
        vertical-align:middle;
        text-align:center;
        background-position:center center;
        background-repeat:no-repeat;
        overflow:hidden;
        margin-bottom:25px;
      }
      .post .p_content .p_body {
        width:660px;
      }
        .post .p_content a {
          color:#5b910c !important;
        }
        .post .p_content a:hover {
          color:#72ae1b !important;
        }
      .post .p_content .p_link {
        font-size:16px;
        line-height:20px;
        margin-top:10px;
      }
    
    .posts_nav {
      width:100%;
      height:80px;
      clear:both;
      text-transform:uppercase;
      font-size:16px;
      line-height:16px;
      font-family: "Arial Rounded MT Bold", Arial, Helvetica, sans-serif;
      font-weight:bold;
      margin-top:30px;
    }
      .posts_nav a {
        position:absolute;
        width:auto;
        height:auto;
        top:0;
        border:0px solid blue;
        padding:15px;
      }
      .posts_nav .older_posts_link {
        left:-15px;
      }
      .posts_nav .newer_posts_link {
        right:-15px;
      }
    
      
    .p_thumb, .p_content, .p_media, .blognavs .b_nav {
      border-radius: 6px; -moz-border-radius: 6px; -webkit-border-radius: 6px;
    }
    
    pre, code {
      padding:5px;
    }
    
    .blognavs {
      width:170px;
      margin-left:20px;
      margin-top:110px;
      border:0px solid blue;
      right:-10px;
    }
    .blognavs .b_nav {
      width:144px;
      padding:20px 13px 22px 13px;
      margin-top:30px;
    }
      .blognavs .b_nav h3, .blognavs .b_nav h3 a {
        color:#fff !important;
        margin:0 0 12px 0 !important;
        padding:0 !important;
        line-height:16px !important;
      }
      .blognavs .b_nav a {
        position:relative;
        float:left;
        clear:both;
        width:100%;
        line-height:14px;
        padding:5px 0;
        border:1px solid rgba(255,255,255,0.25);
        border-width:0px 0px 1px 0px;
        color:#efefef;
      }
      .blognavs .b_nav h3 a {
        margin:0;
        padding:0;
        border:0;
      }
      .blognavs .b_nav a:hover {
        color:#fff;
      }
      .blognavs .b_nav a.first {
        border-width:1px 0px 1px 0px;
      }
      .blognavs .b_nav a.last {
        border-width:0px 0px 1px 0px;
      }
    
    .p_content, .b_nav, .p_thumb {
      box-shadow: 0px 3px 20px rgba(0,0,0,0.7);
      -moz-box-shadow : 0px 3px 20px rgba(0,0,0,0.7);
      -webkit-box-shadow : 0px 3px 20px rgba(0,0,0,0.7);
    }
    
    .arrow_up_light {
      position:absolute;
      width:27px;
      height:13px;
      left:28px;
      top:-13px;
      background:transparent url('img/arrowbox_light.png') no-repeat left top;
    }
    
    .arrow_left {
      position:absolute;
      width:27px;
      height:27px;
      left:-13px;
      top:15px;
    }
    .arrow_left.blue {
      background:transparent url('img/arrowbox_blue.png') no-repeat left top;
    }
    
    .arrow_left.green {
      background:transparent url('img/arrowbox_green.png') no-repeat left top;
    }
    
    .arrow_left.dark {
      background:transparent url('img/arrowbox_dark.png') no-repeat left top;
    }
    
  </style>
</head>
<body class="">



<div id="headerwrap">
  <div id="header">
    <div id="logoring"></div>

    <div id="logo"></div>
    <div id="logolink"><a href="/"><img src="/img/blank.gif" alt="LessPainful" width="100%" height="100%" /></a></div>

    <div id="topnav">
      <a href="https://www.lesspainful.com/">Home</a>
      <a href="https://www.lesspainful.com/pricing">Pricing</a>
      <a href="https://www.lesspainful.com/documentation">Documentation</a>
      <a href="https://blog.lesspainful.com" class="active">Blog</a>
      <a href="/users/sign_up">Sign up</a>
      <a href="/users/sign_in">Log in</a>
    </div>
  </div>
</div>



<div class="wrap nopadding nomargin" style="min-height:400px">

  <div class="center">
    
    <div class="blogposts">
      
      <section> 
        <div class="content">
  <div class="blog_posts">
  
    <div class="post">
      <div class="p_head">
        <div class="p_thumb" style="background-image:url('/img/jonas.jpg')"></div>
        <div class="p_title">
          <h1><a href="/2012/02/25/Calabash-Android">An Overview of Calabash Android</a></h1>
        </div>
        <div class="p_info">
          Posted by Jonas Maturana Larsen - February 25, 2012
        </div>
      </div>
      <div class="p_content lightbg">
        <div class="arrow_up_light"></div>
        <div class="p_body">
        <h2>An Overview of Calabash Android</h2>

<p>This post describes <a href="http://github.com/calabash/calabash-android">Calabash Android</a> in some technical detail. It will give you an architectural overview of Calabash Android and a resume of the functional testing tools available for Android. It assumes that you  are familiar with <a href="http://cukes.info">Cucumber</a> and Android development.</p>

<ul>
<li>For an introduction to Calabash and LessPainful (and some info on Cucumber), please read <a href="...">Calabash: Functional Testing for Mobile Apps</a>.</li>
<li>Instructions for how to use Calabash in your Android project can be found on <a href="http://github.com/calabash/calabash-android">Github</a>.</li>
</ul>


<h2>Calabash Android Architecture</h2>

<p>When a Calabash Android test is executed both your local computer and a device is involved. The device might be an emulator or a actual physical device.
It looks somethings like this:
<img src="/img/CalabashAndroidArchitecture.png" alt="Calabash-iOS architecture" /></p>

<ul>
<li><p>Features. The feature files describe the user-stories you want to test. You can test one or more features in one test run.</p></li>
<li><p>Step Definitions. Calabash Android comes with a set of predefined step which you can find <a href="https://github.com/calabash/calabash-android/blob/master/features/step_definitions/canned_steps.md">here</a>. These steps are generic and made to get you up and running fast.
When you get more into Calabash you can implement your own custom steps that use the business terms your project uses like <code>I transfer money to my spendings account</code> or <code>I play "Never Gonna Give You Up"</code>.</p></li>
<li><p>Your app. You don&rsquo;t have to make modifications to your app before testing it.</p></li>
<li><p>Instrumentation Test Server. This is another app that will be installed and executed the device. This app is based on <code>ActivityInstrumentationTestCase2</code> from the Android SDK. It is generated by the Calabash Android framework.</p></li>
</ul>


<h2>Functional Testing tools for Android</h2>

<p>The Android SDK comes with a testing framework located in the <code>android.test</code>. <a href="http://developer.android.com/resources/tutorials/testing/helloandroid_test.html">According to Google</a> it is easy to use. However, I&rsquo;m pretty sure that the person who wrote that either never wrote and maintained a test using <code>ActivityInstrumentationTestCase2</code> or has totally misunderstood the &ldquo;easy to use&rdquo; concept. :&ndash;)</p>

<p>When <a href="http://www.linkedin.com/pub/renas-reda/25/70a/932">Renas Reda</a> created <a href="http://www.robotium.org">Robotium</a> things became a lot easier. Robotium is a utility that handles a lot of the small details you really don&rsquo;t want to be concerned about in a functional test. You are still writing your test using Java and JUnit but a lot of the very annoying things from vanilla Android testing is now taking care of and don&rsquo;t pollute your tests. Today all the Android projects that I know of that do any kind of testing use Robotium or Calabash. So if you are still fighting <code>android.test</code> and want to clean up your tests you should give Robotium a try and send Renas a happy thought.</p>

<p>Even when using Robotium my experience from several large Android projects is that writing functional testing in Java is just wrong. Over time, the ever growing test suite becomes more and more complicated and takes more and more resources to maintain. But hey! Why wouldn&rsquo;t it be like that? That is exactly the same experience we had when writing functional test for websites!</p>

<p>Calabash uses Robotium as a library to make the interaction with the tested app as robust as possible while letting the developer or tester write precise clean test that are easy to maintain.</p>

<p>And that&rsquo;s why you should give <a href="http://github.com/calabash/calabash-android">Calabash Android</a> a try.</p>

<h2>Testing Hybrid Apps</h2>

<p>If you are using Appcelerator, PhoneGap, Sencha Touch or any of the other frameworks for creating <em>hybrid apps</em>.
You should really take a look at the Calabash. By using the same Cucumber interface for a native app you can test HTML 5 part of your application.
Testing webviews has not been posible with the currently available test frameworks. But with Calabash you can!</p>

        </div>
      </div>
    </div>
  
    <div class="post">
      <div class="p_head">
        <div class="p_thumb" style="background-image:url('/img/karl.jpg')"></div>
        <div class="p_title">
          <h1><a href="/2012/02/21/Calabash-iOS">An Overview of Calabash iOS</a></h1>
        </div>
        <div class="p_info">
          Posted by Karl Krukow - February 21, 2012
        </div>
      </div>
      <div class="p_content lightbg">
        <div class="arrow_up_light"></div>
        <div class="p_body">
        <h2>An Overview of Calabash iOS</h2>

<p>This post describes <a href="http://github.com/calabash/calabash-ios">Calabash iOS</a> in some technical detail. It will give you an architectural overview and compare Calabash iOS with some other functional testing alternatives (hence, it is fairly advanced and assumes that you are familiar with <a href="http://cukes.info">Cucumber</a> and iOS development).</p>

<ul>
<li>For an introduction to Calabash and LessPainful (and some info on Cucumber), please read <a href="...">Calabash: Functional Testing for Mobile Apps</a>.</li>
<li>Instructions for how to use Calabash in your iOS project can be found in the <a href="http://github.com/calabash/calabash-ios">Github Readme</a>.</li>
<li>For a tutorial on how to use Calabash iOS once setup, please see <a href="http://github.com/calabash/calabash-ios/wiki/Tutorial">Calabash iOS tutorial</a>.</li>
</ul>


<h2>Calabash Architecture</h2>

<p>Calabash tests are usually run with the <a href="http://cukes.info">Cucumber tool</a>. A Calabash test suite consist of three parts:</p>

<ul>
<li><p>Your app, linked with the <code>calabash.framework</code>. In XCode, you make a new test target and link with Calabash only in this target. The framework embeds an HTTP server in your app (of course, this is only in builds of your new test target). The Calabash client library (see next bullet) makes HTTP requests to the server when it wants to do something with the current view.</p></li>
<li><p>The Calabash client library and step definitions. Calabash supports two types of step definitions: <a href="https://github.com/calabash/calabash-ios/wiki/Predefined,-canned-steps">built-in</a> and custom. The built-ins define general and domain-neutral steps that are intended to give you a quick and easy start. They contain steps like: <code>I should see a "..." button</code> and <code>I swipe right</code>. The custom steps are written by you, and they&rsquo;re specific to your domain or application. Examples could be: <code>I should be on the Login screen</code>, <code>I login as Pete</code> or <code>I add a track to my playlist</code>. To implement a custom step you can use methods defined in the Calabash <em>client library</em>, calabash-cucumber,  which is part of <a href="http://github.com/calabash/calabash-ios">Calabash iOS</a>.</p></li>
<li><p>Your feature files. The feature files describe the app use-cases you want to test. They are simultaneously a specification of the behaviour of your app and an executable test suite.</p></li>
</ul>


<p>You can visualize this as:</p>

<p><img src="/img/calabash-ios.png" alt="Calabash-iOS architecture" /></p>

<p>Calabash iOS supports running on the iOS simulator as well as (non-jailbroken) iPhones, iPads and iPod touches. The calabash server framework is distributed as a  universal framework for your convenience.</p>

<p>The client library, calabash-cucumber, is installed using <a href="http://rubygems.org/">RubyGems</a> (see detailed instructions under <a href="https://github.com/calabash/calabash-ios">Installing the client</a>).</p>

<h3>Comparison with other functional testing systems</h3>

<p>There are several options out there for functional testing on iOS. Apple provides its <a href="https://developer.apple.com/library/ios/#documentation/DeveloperTools/Reference/UIAutomationRef/_index.html">UIAutomation</a>, there is <a href="http://www.zucchiniframework.org/">Zucchini</a>, <a href="https://github.com/moredip/Frank">Frank</a> by Pete Hodgson, <a href="https://github.com/square/KIF">KIF</a> by square, <a href="http://www.gorillalogic.com/fonemonkey">FoneMonkey</a> by Gorilla Logic, <a href="https://github.com/unboxed/icuke">iCuke</a> by Rob Holland, and probably a few I&rsquo;ve looked at and forgotten again!</p>

<p>All the projects have their advantages and disadvantages, Calabash included. But we think that Calabash hits a sweet spot that none other the other options cover.</p>

<h3>Frank</h3>

<p><a href="https://github.com/moredip/Frank">Frank</a> is the library closest to Calabash; in fact, when we started experimenting with iOS support at LessPainful we started with Frank. Frank is a very cool project by a great person (that&rsquo;s you Pete), and Calabash is highly inspired by it. But there were a couple of important reasons why we could not use Frank.</p>

<p>First, Frank is licensed using GNU GPLv3 and we wanted to use the less restrictive EPL. Pete actually didn&rsquo;t want to license Frank as GPL, but since Frank is based on UISpec which is GPL'ed, he had to. We did not want the <a href="http://code.google.com/p/uispec/">UISpec</a> project as a dependency.</p>

<p>Second, when we started to look at Frank, it was a bit of a pain to set up (in the mean time, its actually gotten much better). It required modification of you app source, inclusion of static resources and source files. We wanted calabash to be easy to set up, so we made Calabash a universal framework.</p>

<p>Third, Frank is focused on running in the iOS simulator. We wanted something that ran equally well on simulator, iPhone and iPad. There is no fundamental reason that the Frank architecture shouldn&rsquo;t work on physical devices (indeed Calabash has the same architecture), but many of Frank&rsquo;s step definitions are simulator only.</p>

<p>Finally, we needed support for some advanced features that Frank just didn&rsquo;t have. Frank&rsquo;s touch emulation is derived from <a href="http://code.google.com/p/uispec/">UISpec</a>, which has some disadvantages: it only supports tapping, and actually doesn&rsquo;t seem to work in all cases (<a href="https://groups.google.com/group/frank-discuss/tree/browse_frm/month/2011-09/cc1fb65c717180c5">for example on a UISwitch</a>). We wanted support for gestures like swipe, pinch-to-zoom, backgrounding and rotation. We wanted support for querying and acting on UIWebViews.</p>

<p>Frank also has the cool Symbiote tool which let&rsquo;s you explore your app from a browser. We don&rsquo;t have Symbiote in Calabash, but instead we have a powerful console based tool for interacting and exploring your application (more on this in a later blog post).</p>

<h3>KIF, iCuke, FoneMonkey</h3>

<p>KIF is another cool project. KIF has an Apache 2.0 license which is ok, but two primary things kept us from going down this route. First, KIF is based on the same touch emulation code as UISpec, and has the same limitations (which actually goes back to a seminal CocoaWithLove post from 2008, <a href="http://cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html">Synthesizing touch events on iPhone</a>). Secondly, KIF tests are written in Objective-C, and we specifically wanted <a href="http://cukes.info">Cucumber</a>.</p>

<p><a href="https://github.com/unboxed/icuke">iCuke</a> actually looked very promising two years ago. Unfortunately its author, Rob Holland, has abandoned it, and we had a difficult time proceeding with it.</p>

<p>FoneMonkey, is GPL licensed and doesn&rsquo;t support Cucumber (also, I have a personal issue with recording-based approaches to test code generation).</p>

<h3>UIAutomation and Zucchini</h3>

<p>Apple&rsquo;s UIAutomation framework is actually quite advanced in supporting various gestures. It&rsquo;s also simple to set up since it works without modification to the app (runs via instruments). There are a couple of reasons why we decided not to use UIAutomation.</p>

<p>First, UIAutomation is not open source &ndash; this means we have to wait for Apple to make bug fixes, and we can&rsquo;t extend it. It is also very poorly documented by Apple, and not that much information available on the net.</p>

<p>Second, tests are written in JavaScript using a horrible API, resulting in tests that are too easy to break when making minor changes to the UI (IMHO). The tool for developing and running tests (UIAutomation Instrument) gives an inefficient workflow, for example, by locking the editing file, missing the ability to interactively explore your app and running only parts of a test. Also, screenshotting only works on device.</p>

<p>Third, UIAutomation is hard to get working in a continuous integration setup (in fact, when we first looked at it, CI was completely impossible). Extracting tests results and screenshots in a CI friendly way is hard.</p>

<p><a href="http://www.zucchiniframework.org/">Zucchini</a>, is a new project that&rsquo;s very cool. It has some great addons for working with app screenshots (we might &lsquo;borrow&rsquo; those for Calabash :), and it makes the developer experience much better by using CoffeeScript instead of JavaScript and by coming with some convenience tools. However, by compiling to UIAutomation compatible JavaScript and running via UIAutomation, it has some of the same problems as UIAutomation itself (lack of documentation, Apple control, the fragility of tests, etc.). Also, we didn&rsquo;t want Calabash users to be required to learn CoffeeScript.</p>

<h3>What&rsquo;s next?</h3>

<p>In upcoming posts we&rsquo;ll describe more implementation details of Calabash iOS. For example, we&rsquo;ll show how to make advanced custom steps using the client library API, we&rsquo;ll look at support for rotation and gestures like swiping, and even how you can record your own advanced gestures. We&rsquo;ll also look at an efficient workflow for writing tests in an interactive and exploratory manner.</p>

        </div>
      </div>
    </div>
  
    <div class="post">
      <div class="p_head">
        <div class="p_thumb" style="background-image:url('/img/karl.jpg')"></div>
        <div class="p_title">
          <h1><a href="/2012/02/20/Calabash">Calabash</a></h1>
        </div>
        <div class="p_info">
          Posted by Karl Krukow - February 20, 2012
        </div>
      </div>
      <div class="p_content lightbg">
        <div class="arrow_up_light"></div>
        <div class="p_body">
        <h2>Calabash: Functional Testing for Mobile Apps</h2>

<p>Jonas and I are proud to release
Calabash, a new functional testing tool for mobile apps based on
<a href="http://cukes.info">Cucumber</a>. LessPainful has been developing
Calabash over the last year pursuing its expressive power, simplicity
and stability. Calabash is the technology that powers device
automation and test execution at
<a href="http://www.lesspainful.com">LessPainful</a>, but as of today it is
released as open source to the general public:
<a href="http://github.com/calabash">http://github.com/calabash</a>.</p>

<h3>The short story</h3>

<p>The following section, <em>Introducing Calabash</em>, is intended to describe
Calabash for people who don&rsquo;t already know Cucumber, or who haven&rsquo;t
been looking at functional testing for mobile apps. If that doesn&rsquo;t
apply to you, you can go to the <a href="#rationale">Rationale and
Benefits</a> section &ndash; otherwise just continue reading :)</p>

<h3>Introducing Calabash</h3>

<p>Calabash consists of two libraries
<a href="http://github.com/calabash/calabash-android">calabash-android</a> and
<a href="http://github.com/calabash/calabash-ios">calabash-ios</a>. As you can
imagine, calabash-android is the automation and testing library for
Android, and similarly calabash-ios is for iOS.</p>

<p>Calabash can be considered the underlying low-level libraries that
empower the Cucumber tool to run automated functional tests on
Android and iOS phones and tablets as well as on
simulators. These low-level libraries enable QA, business staff and
developers to work at a high level: they write tests in a natural
language using the terms and concepts of their business domain. For
example, here is part of a test written with Calabash.</p>

<pre><code>Feature: Rating a stand
  Scenario: Find and rate a stand from the list
    Given I am on the List
    Then I should see a "rating" button
    And I should not see "Dixie Burger &amp; Gumbo Soup"
    And take picture

    Then I touch the "rating" button
    And I should see "Dixie Burger &amp; Gumbo Soup"
    And take picture

    When I touch "Dixie Burger &amp; Gumbo Soup"
    Then I should see details for "Dixie Burger &amp; Gumbo Soup"

    When I touch the "rate_it" button
    Then I should see the rating panel

    Then I touch "star5"
    And I touch "rate"
    And take picture
</code></pre>

<p>If you don&rsquo;t already know <a href="http://cukes.info">Cucumber</a>, it may
surprise you that this description is actually an executable test
specification that is part of a test suite for an iPhone app!</p>

<p>In Cucumber and Calabash, one defines so-called feature files, that
describe the intended behaviour of the app. You can think of a feature
file as an executable test specification of a use case of the app. In
our example above, we have a <em>feature</em> which describes functionality
for rating a food stand at
<a href="http://roskilde-festival.dk/uk/">Roskilde Festival</a>. A feature
consists of one or more scenarios, corresponding more or less to the
possible outcomes of the use cases. In our simple example we have only
one scenario the &ldquo;sunshine&rdquo; scenario where we find a stand and rate it
five stars. There would usually also be scenarios testing other
things, e.g., error scenarios. Finally, each scenario consists of a
number of steps. The usual form of a feature is:</p>

<pre><code>Feature: name...
  Scenario: ...
    Step
    Step
    ...

  Scenario: ...
    Step
    Step
    ...
</code></pre>

<p>In our example, each line after &ldquo;Scenario&rdquo;
corresponds to a step. In calabash, a step does one of three things:
makes a user action (like touch, swipe, scroll, etc.), makes an
assertion (like <code>Then I should see details for ".."</code>) or takes a
screen-shot. The screen-shot step takes a snapshot of how your
application looks at the point in the test. Screenshots can then be
inspected for graphical errors that are hard to catch using
assertions. Also, comparing screenshots across many different Android
or iOS devices and operating system can be really useful. This type of visual test report, is part of what the <a href="http://www.lesspainful.com">LessPainful Service</a> offers. You can see an example our feature for the Roskilde app above in the <a href="#LessPainful">LessPainful section</a>.</p>

<h3>Overview: How it works</h3>

<p>We&rsquo;ll describe briefly how Calabash works. You can get more details in the blog posts on <a href="http://blog.lesspainful.com/...">Calabash Android</a> and <a href="http://blog.lesspainful.com/...">Calabash iOS</a>. You can also go straight to the sources: <a href="http://github.com/calabash/calabash-android">http://github.com/calabash/calabash-android</a>, <a href="http://github.com/calabash/calabash-ios">http://github.com/calabash/calabash-ios</a> and <a href="http://github.com/calabash/calabash-ios-server">http://github.com/calabash/calabash-ios-server</a>.</p>

<p><em>Calabash iOS</em> consists of two parts: a client library written in Ruby, and <code>calabash.framework</code>, a server framework written in Objective-C (a Clojure/JVM version of the client is coming too!). To use calabash you make a special test target in XCode that links with <code>calabash.framework</code>. The application is otherwise unchanged. The server framework will start an HTTP server inside your app that listens for requests from the client library.</p>

<p>The cucumber tool executes your feature files which contain steps that are defined either in <em>predefined</em> or <em>custom</em> (user defined) steps definitions. Custom steps are written using the API that the client library exposes. The API methods make HTTP requests to the server, which does things like finding components in the UI and taking actions on them. Here is an illustration:</p>

<p><img src="/img/calabash-ios.png" alt="Calabash-iOS architecture" /></p>

<p><em>Calabash Android</em> is slightly different&hellip;(<a href="#TODO_Jonas">Jonas</a>)</p>

<p><a name="rationale"></a></p>

<h3>Rationale and Benefits</h3>

<p>Why create a new open source functional test library? There are several reasons.</p>

<dl>
 <dt>Uniform interface across platforms</dt>
 <dd>We wanted a single interface for
    specifying the behaviour of mobile apps across platforms. Many
    companies are creating the same app (or <em>almost</em> the same app) for
    both iOS and Android, and pay double costs when it comes to
    testing. With Calabash, you have the option of maintaining
    only one feature file per app use-case, even if you are
    developing for both Android and iOS. The platform or app
    differences can be factored out into so-called <em>step definitions</em>
    which are different per platform. (If you're thinking Windows Phone? Then, yes, it is an option, but we haven't gotten round to it yet ;)
 </dd>
 <dt>Cucumber</dt>
 <dd>We wanted a high-level, domain-centric language for specification. The Cucumber technology gives us this. A Cucumber feature file can be written by QA, domain experts or developers; developers or technical test staff can then write step definitions to realize the steps on each platform (possibly using one of the many predefined steps or APIs).</dd>
 <dt>Authenticity</dt>
 <dd>We wanted a test automation technology that is as authentic as possible. Test must be able to run equally well on physical, non-jailbroken devices as on simulators. The <a href="#LessPainful">LessPainful Service</a> takes this to the next level, by providing a test execution environment for running tests concurrently on many different devices (we even do <a href="">rotation using little robots!</a>).
 </dd>
 <dt>Expressive power</dt>
 <dd>There are some cool functional testing technologies out there already (like Robotium, Frank, NativeDriver, KIF, Zucchini and UIAutomation). However, in our opinion each of them have advantages and disadvantages, and none of them fulfilled our needs completely (see details in the blog posts <a href="#">Calabash Android</a> and <a href="#">Calabash iOS</a>). We wanted a technology with expressive power: support for complex gestures (swipes, pinch, etc), embedded webviews, rotation, backgrounding ... all while running on non-jailbroken devices.
 </dd>
 <dt>Extensibility and Community</dt>
 <dd>This is part of the reason why we are open sourcing Calabash. We want you to test your apps and ship better quality. We want Calabash users to be able to extend Calabash itself, and we want to build an open source community that is enthusiastic about the technology.
 </dd>

</dl>


<p><a name="LessPainful"></a></p>

<h3>LessPainful</h3>

<p>What is the role of <a href="http://www.lesspainful.com">LessPainful</a> in
regard to Calabash, and what services do we provide?</p>

<p>LessPainful is the founder of Calabash: we are its core committers and
we are dedicated to continuously improving it. Our business model
consists of two offerings.</p>

<p>First, we offer commercial support, training and consulting on
automated testing of mobile apps. We can also help setup advanced
continuous integration build environments on iOS and Android.</p>

<p>Secondly, LessPainful provides a test execution service which runs
Calabash tests &ldquo;in the cloud&rdquo;. The service automates running tests
concurrently on several physical, non-jailbroken Android and iOS
phones and tablets. We support several operating system versions, as
well as device language and regional settings.</p>

<p>The LessPainful service provides visual test reports. This lets you
easily compare test results and the visual appearance of your app
across different devices. Here is an example test report from our
example &ldquo;food stand&rdquo; app:</p>

<p><a href="/img/test_report_overview.png">
<img src="/img/test_report_large.png" title="Test report overview" alt="Test report overview">
</a></p>

<p>The LessPainful Service is designed to support continuous integration
by providing a web service for running tests with every commit or on a
daily basis.</p>

<p>Here is part of an Android test running on &hellip; different models!</p>

<p><a href="/img/android_test_report_overview.png">
<img src="/img/android_test_report_large.png" title="Android test report overview" alt="Android test report overview">
</a></p>

        </div>
      </div>
    </div>
  
  </div>
</div>

      </section>
    </div>
    
    
    
    
    
    <div class="blognavs">
      
      <div class="b_nav bluebg">
        <div class="arrow_left blue"></div>
        <h3><a href="#more_stuff">Navigation<br/>and Stuff</a></h3>
        <a href="https://www.lesspainful.com" class="first">LessPainful.com ›</a>
        <a href="https://github.com/calabash">Calabash on GitHub ›</a>
      </div>

      <div class="b_nav greenbg">
        <div class="arrow_left green"></div>
        <h3><a href="#categories_page">History</a></h3>
        
          <a class="first" href="/2012/02/25/Calabash-Android"> An Overview of Calabash Android ›</a>
        
          <a class="" href="/2012/02/21/Calabash-iOS"> An Overview of Calabash iOS ›</a>
        
          <a class="last" href="/2012/02/20/Calabash"> Calabash ›</a>
        
      </div>
  </div>

</div>




<div id="footerwrap">
  <div id="footer">
    <div id="copyrightinfo">
      Copyright © LessPainful 2011&nbsp;&nbsp;·&nbsp;&nbsp;LessPainful ApS CVR: 33 64 49 49&nbsp;&nbsp;·&nbsp;&nbsp;Phone: +45 77 34 27 40&nbsp;&nbsp;·&nbsp;&nbsp;<a href="mailto:contact@lesspainful.com">contact@lesspainful.com</a>
    </div>
    <div id="footerlogo"></div>
  </div>
</div>


</body>
</html>
